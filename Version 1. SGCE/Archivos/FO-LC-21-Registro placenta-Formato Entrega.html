<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FO-LC-21 - Formato de Entrega</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <style>
        /* Estilos base consistentes */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Calibri', 'Arial', sans-serif;
        }
        
        body {
            background: #f0f0f0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        
        .document-container {
            width: 21cm;
            min-height: 29.7cm;
            background: white;
            padding: 1.5cm;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative;
        }
        
        /* Encabezado superior con logo y n√∫mero de registro */
        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .logo-container {
            width: 30%;
        }
        
        .logo-placeholder {
            width: 150px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9f9f9;
        }
        
        .logo-image {
            max-width: 100%;
            max-height: 100%;
        }
        
        .registry-number {
            width: 30%;
            text-align: right;
        }
        
        .registry-field {
            border: 1px solid #ccc;
            padding: 5px 10px;
            font-size: 11pt;
            text-align: center;
            background: #f9f9f9;
            margin-top: 5px;
            min-height: 35px;
            cursor: text;
        }
        
        /* T√≠tulo del documento */
        .document-title {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
        }
        
        .document-title h1 {
            font-size: 20pt;
            color: #2c3e50;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .document-title p {
            font-size: 12pt;
            color: #666;
            margin: 5px 0;
        }
        
        .section {
            margin-bottom: 25px;
            page-break-inside: avoid;
        }
        
        .section-title {
            background: #27ae60;
            color: white;
            padding: 8px 15px;
            font-size: 14pt;
            font-weight: bold;
            margin-bottom: 15px;
            border-radius: 3px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 11pt;
            color: #2c3e50;
        }
        
        .field {
            border-bottom: 1px solid #ccc;
            padding: 8px 5px;
            min-height: 35px;
            font-size: 11pt;
        }
        
        /* Casillas cuadradas para S√≠/No */
        .yesno-group {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-top: 5px;
        }
        
        .checkbox-square {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .checkbox-square input[type="checkbox"] {
            display: none;
        }
        
        .checkbox-square .checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid #2c3e50;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: white;
            transition: all 0.2s;
        }
        
        .checkbox-square input[type="checkbox"]:checked + .checkmark {
            background: #27ae60;
            border-color: #27ae60;
        }
        
        .checkbox-square input[type="checkbox"]:checked + .checkmark::after {
            content: "‚úì";
            color: white;
            font-weight: bold;
            font-size: 14px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        /* Para checkboxes normales */
        .checkbox-normal {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin-bottom: 8px;
        }
        
        .checkbox-normal input[type="checkbox"] {
            display: none;
        }
        
        .checkbox-normal .checkmark {
            width: 18px;
            height: 18px;
            border: 2px solid #2c3e50;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: white;
            transition: all 0.2s;
        }
        
        .checkbox-normal input[type="checkbox"]:checked + .checkmark {
            background: #27ae60;
            border-color: #27ae60;
        }
        
        .checkbox-normal input[type="checkbox"]:checked + .checkmark::after {
            content: "‚úì";
            color: white;
            font-weight: bold;
            font-size: 12px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .radio-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .radio-group input {
            margin-right: 8px;
        }
        
        .radio-options {
            display: flex;
            gap: 20px;
            margin-top: 5px;
        }
        
        .signature-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #2c3e50;
        }
        
        .signature-box {
            text-align: center;
        }
        
        .signature-line {
            border-bottom: 1px solid #2c3e50;
            height: 50px;
            margin: 15px 0;
        }
        
        .footer {
            position: absolute;
            bottom: 1cm;
            left: 1.5cm;
            right: 1.5cm;
            text-align: center;
            font-size: 9pt;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }
        
        .required::after {
            content: " *";
            color: #e74c3c;
        }
        
        .instructions {
            font-size: 9pt;
            color: #666;
            font-style: italic;
            margin-top: 3px;
        }
        
        /* C√≥digos de barras */
        .barcode-section {
            text-align: center;
            margin-top: 10px;
        }
        
        .barcode-small {
            width: 150px;
            height: 40px;
        }
        
        .barcode-large {
            width: 200px;
            height: 60px;
        }
        
        .barcode-label {
            font-size: 9pt;
            color: #666;
            margin-top: 5px;
        }
        
        /* Botones de acci√≥n */
        .action-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .action-btn {
            padding: 10px 15px;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .btn-print {
            background: #2c3e50;
        }
        
        .btn-pdf {
            background: #e74c3c;
        }
        
        .btn-clear {
            background: #95a5a6;
        }
        
        /* Estilos espec√≠ficos */
        .inline-options {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 5px;
        }
        
        .observation-box {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 4px solid #27ae60;
            min-height: 50px;
        }
        
        .verification-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }
        
        /* Estilos para impresi√≥n - CORREGIDOS */
        @media print {
            body {
                background: white;
                padding: 0 !important;
                margin: 0 !important;
                display: block !important;
            }
            
            .document-container {
                width: 100% !important;
                min-height: auto !important;
                height: auto !important;
                box-shadow: none !important;
                padding: 0.8cm !important;
                margin: 0 auto !important;
                page-break-inside: avoid;
                page-break-after: avoid;
            }
            
            .top-header {
                margin-bottom: 15px !important;
                padding-bottom: 10px !important;
            }
            
            .document-title {
                margin-bottom: 15px !important;
                padding-bottom: 10px !important;
            }
            
            /* Ocultar completamente los botones de acci√≥n */
            .action-buttons {
                display: none !important;
            }
            
            /* Ajustar m√°rgenes de p√°gina */
            @page {
                margin: 0.5cm;
                size: A4;
            }
            
            /* Asegurar que no se muestren URLs en los enlaces */
            a[href]:after {
                content: none !important;
            }
            
            /* Estilos para checkboxes en impresi√≥n */
            .checkbox-square .checkmark,
            .checkbox-normal .checkmark {
                border: 2px solid #000 !important;
                background: #fff !important;
            }
            
            .checkbox-square input[type="checkbox"]:checked + .checkmark,
            .checkbox-normal input[type="checkbox"]:checked + .checkmark {
                border: 2px solid #000 !important;
                background: #fff !important;
            }
            
            .checkbox-square input[type="checkbox"]:checked + .checkmark::after,
            .checkbox-normal input[type="checkbox"]:checked + .checkmark::after {
                color: #000 !important;
                content: "‚úì" !important;
            }
            
            /* Eliminar cualquier espacio innecesario */
            .section {
                margin-top: 0;
                padding-top: 0;
            }
            
            /* Ajustar altura de campos para impresi√≥n */
            .field {
                min-height: 30px !important;
                page-break-inside: avoid;
            }
            
            /* Eliminar efectos hover para impresi√≥n */
            .action-btn:hover {
                transform: none !important;
                box-shadow: none !important;
            }
        }
        
        /* Estilos para pantalla */
        @media screen {
            .document-container::before,
            .document-container::after {
                display: none;
            }
            
            /* Estilo para campos editables */
            [contenteditable="true"]:focus {
                background-color: #f0f8ff !important;
                border-bottom: 2px solid #27ae60 !important;
                outline: none !important;
            }
            
            .registry-field:focus {
                border: 2px solid #27ae60 !important;
                background-color: #f0f8ff !important;
                outline: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="document-container">
        <!-- Encabezado superior con logo -->
        <div class="top-header">
            <div class="logo-container">
                <div class="logo-placeholder">
                    <div class="logo-text"><img class="logo-image" src="XelleScientific.png" alt=""></div>
                </div>
            </div>
            
            <div class="registry-number">
                <label>No. Registro</label>
                <div class="registry-field" contenteditable="true" id="registro-number">CF-001-2025</div>
                <!-- C√≥digo de barras peque√±o para No. Registro -->
                <div class="barcode-section">
                    <svg class="barcode-small" id="barcode-registro"></svg>
                    <div class="barcode-label">Registro</div>
                </div>
            </div>
        </div>

        <!-- T√≠tulo del documento -->
        <div class="document-title">
            <h1>FORMATO DE ENTREGA</h1>
            <p>Banco de C√©lulas - Control recolecci√≥n placenta</p>
            <p><strong>C√≥digo:</strong> FO-LC-21 | <strong>Versi√≥n:</strong> 1.0 | <strong>Secci√≥n 2 de 2</strong></p>
        </div>

        <!-- SECCI√ìN: FORMATO DE ENTREGA -->
        <div class="section">
            <!-- 1. Identificaci√≥n de la Muestra -->
            <div class="form-group full-width">
                <label class="required">1. Identificaci√≥n de la Muestra</label>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="required">ID de muestra</label>
                    <div class="field" contenteditable="true" id="id-muestra">TPL30.28.FEB.25</div>
                    <!-- C√≥digo de barras para ID de muestra -->
                    <div class="barcode-section">
                        <svg class="barcode-large" id="barcode-muestra"></svg>
                        <div class="barcode-label">ID de Muestra</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>C√≥digo de barras (si aplica)</label>
                    <div class="field" contenteditable="true">N/A</div>
                </div>
                
                <div class="form-group">
                    <label>Fecha y hora de colecta</label>
                    <div class="field" contenteditable="true">28 FEBRERO 2025 07:45 HORAS</div>
                </div>
                
                <div class="form-group">
                    <label>Fecha y hora de salida de centro de colecta</label>
                    <div class="field" contenteditable="true">28 FEBRERO 2025 12:00 HORAS</div>
                </div>
                
                <div class="form-group">
                    <label>Fecha y hora de recolecci√≥n del banco</label>
                    <div class="field" contenteditable="true">28 FEBRERO 2025 12:40 HORAS</div>
                </div>
                
                <div class="form-group">
                    <label>Tiempo de transporte</label>
                    <div class="field" contenteditable="true">40 MINUTOS</div>
                </div>
            </div>
            
            <!-- 2. Condiciones de transporte y embalaje -->
            <div class="form-group full-width">
                <label class="required">2. Condiciones de transporte y embalaje</label>
            </div>
            
            <div class="verification-grid">
                <div class="form-group">
                    <label>Envase est√©ril y sellado</label>
                    <div class="yesno-group">
                        <label class="checkbox-square">
                            <input type="checkbox" id="entrega_envase_si" checked>
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">S√≠</span>
                        </label>
                        <label class="checkbox-square">
                            <input type="checkbox" id="entrega_envase_no">
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">No</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Lote de envase</label>
                    <div class="yesno-group">
                        <label class="checkbox-square">
                            <input type="checkbox" id="lote_envase_si" checked>
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">S√≠</span>
                        </label>
                        <label class="checkbox-square">
                            <input type="checkbox" id="lote_envase_no">
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">No</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Envase con soluci√≥n de transporte √≠ntegra</label>
                    <div class="yesno-group">
                        <label class="checkbox-square">
                            <input type="checkbox" id="solucion_envase_si" checked>
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">S√≠</span>
                        </label>
                        <label class="checkbox-square">
                            <input type="checkbox" id="solucion_envase_no">
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">No</span>
                        </label>
                    </div>
                    <div style="margin-top: 5px;">
                        <label style="display: inline;">Volumen de soluci√≥n:</label>
                        <span style="margin-left: 10px;" contenteditable="true">100 ml</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Embalaje primario (frasco/tubo) en buen estado</label>
                    <div class="radio-options">
                        <div class="radio-group">
                            <input type="radio" id="primario_integro" name="embalaje_primario" checked>
                            <label for="primario_integro" style="display: inline; font-weight: normal;"><strong>√çntegro</strong></label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" id="primario_danado" name="embalaje_primario">
                            <label for="primario_danado" style="display: inline; font-weight: normal;"><strong>Da√±ado</strong></label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Embalaje secundario (bolsa sellada)</label>
                    <div class="radio-options">
                        <div class="radio-group">
                            <input type="radio" id="secundario_integro" name="embalaje_secundario" checked>
                            <label for="secundario_integro" style="display: inline; font-weight: normal;"><strong>√çntegro</strong></label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" id="secundario_danado" name="embalaje_secundario">
                            <label for="secundario_danado" style="display: inline; font-weight: normal;"><strong>Da√±ado</strong></label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Embalaje terciario (contenedor r√≠gido con aislamiento)</label>
                    <div class="radio-options">
                        <div class="radio-group">
                            <input type="radio" id="terciario_integro" name="embalaje_terciario" checked>
                            <label for="terciario_integro" style="display: inline; font-weight: normal;"><strong>√çntegro</strong></label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" id="terciario_danado" name="embalaje_terciario">
                            <label for="terciario_danado" style="display: inline; font-weight: normal;"><strong>Da√±ado</strong></label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Contenedor r√≠gido con sonda de monitoreo de temperatura</label>
                    <div class="yesno-group">
                        <label class="checkbox-square">
                            <input type="checkbox" id="temperatura_si" checked>
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">S√≠</span>
                        </label>
                        <label class="checkbox-square">
                            <input type="checkbox" id="temperatura_no">
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">No</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Temperatura interna al momento de la recepci√≥n (¬∞C)</label>
                    <div class="field" contenteditable="true">5 ¬∞C</div>
                </div>
                
                <div class="form-group full-width">
                    <label>Evidencia de da√±os, derrames o alteraciones</label>
                    <div class="yesno-group">
                        <label class="checkbox-square">
                            <input type="checkbox" id="danos_no" checked>
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">No</span>
                        </label>
                        <label class="checkbox-square">
                            <input type="checkbox" id="danos_si">
                            <span class="checkmark"></span>
                            <span style="font-weight: normal;">S√≠</span>
                        </label>
                    </div>
                    <div style="margin-top: 5px;">
                        <label style="display: inline;">Describir:</label>
                        <span style="margin-left: 10px;" contenteditable="true"></span>
                    </div>
                </div>
            </div>
            
            <!-- 3. Documentaci√≥n y consentimiento -->
            <div class="form-group full-width">
                <label class="required">3. Documentaci√≥n y consentimiento</label>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Consentimiento informado adjunto</label>
                    <div class="field" contenteditable="true">SI</div>
                </div>
                
                <div class="form-group">
                    <label>Resumen cl√≠nico adjunto</label>
                    <div class="field" contenteditable="true">NO</div>
                </div>
                
                <div class="form-group">
                    <label>Formato de colecta adjunto</label>
                    <div class="field" contenteditable="true">SI</div>
                </div>
            </div>
            
            <!-- 4. Elementos recibidos -->
            <div class="form-group full-width">
                <label class="required">4. Elementos recibidos</label>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Muestra biol√≥gica</label>
                    <div class="field" contenteditable="true">SI</div>
                </div>
                
                <div class="form-group">
                    <label>Lote asignado por el banco</label>
                    <div class="field" contenteditable="true">TPL30.28.FEB.25</div>
                </div>
                
                <div class="form-group full-width">
                    <label>Muestras serol√≥gicas asociadas</label>
                    <div class="observation-box">
                        <div><strong>Condiciones de recolecci√≥n:</strong> <span contenteditable="true">5¬∞C, 2 TUBOS ROJOS CON 5ML DE SANGRE TOTAL CADA UNO</span></div>
                        <div style="margin-top: 10px;"><strong>Cantidad:</strong> <span contenteditable="true">2</span></div>
                        <div style="margin-top: 10px;"><strong>ID de muestras:</strong> <span contenteditable="true">LGUS-SER1, LGUS-SER2</span></div>
                    </div>
                </div>
            </div>
            
            <!-- 5. Cadena de custodia -->
            <div class="form-group full-width">
                <label class="required">5. Cadena de custodia</label>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Nombre de quien entrega (Centro de colecta)</label>
                    <div class="field" contenteditable="true">ARNULFO GONZALEZ BENAVIDES</div>
                </div>
                
                <div class="form-group">
                    <label>Nombre de quien recibe (Banco de c√©lulas)</label>
                    <div class="field" contenteditable="true">OSCAR GUADALUPE ESPARZA SOLIZ</div>
                </div>
                
                <div class="form-group full-width">
                    <label>Fecha y hora de entrega/recepci√≥n</label>
                    <div class="field" contenteditable="true">28 FEBRERO 1:30 HRS</div>
                </div>
            </div>
            
            <!-- Firmas -->
            <div class="signature-area">
                <div class="signature-box">
                    <div class="signature-line"></div>
                    <div style="margin-top: 5px;">Firma Centro de Colecta</div>
                </div>
                <div class="signature-box">
                    <div class="signature-line"></div>
                    <div style="margin-top: 5px;">Firma Banco de C√©lulas</div>
                </div>
            </div>
            
            <!-- 6. Observaciones -->
            <div class="form-group full-width">
                <label>6. Observaciones</label>
                <div class="observation-box" contenteditable="true">
                    SE ENTREGAN EN LABORATORIO PARA SU AN√ÅLISIS.
                </div>
            </div>
        </div>

        <!-- Pie de p√°gina -->
        <div class="footer">
            <p>Formato FO-LC-21 | Versi√≥n 1.0 | Banco de C√©lulas</p>
            <p>El contenido de este documento es propiedad de "Xelle Scientific", S.A.P.I., de C. V., y est√° protegido por los derechos de autor, por lo que est√° prohibida su reproducci√≥n total o parcial.</p>
            <p>P√°gina 1 de 1 (Formato de Entrega)</p>
        </div>
    </div>

    <!-- Botones de acci√≥n -->
    <div class="action-buttons">
        <button class="action-btn btn-print" onclick="window.print()">
            üñ®Ô∏è Imprimir
        </button>
        <button class="action-btn btn-pdf" onclick="saveAsPDF()">
            üìÑ Guardar PDF
        </button>
        <button class="action-btn btn-clear" onclick="clearForm()">
            üóëÔ∏è Limpiar
        </button>
    </div>

 <script>
            function saveAsPDF() {
            alert('Para guardar como PDF, use la funci√≥n de impresi√≥n y seleccione "Guardar como PDF" en las opciones de impresi√≥n.');
            
            // Reducir espacios para impresi√≥n
            const topHeader = document.querySelector('.top-header');
            const documentTitle = document.querySelector('.document-title');
            const firstSection = document.querySelector('.section');
            
            // Guardar valores originales
            const originalTopHeaderMargin = topHeader.style.marginBottom;
            const originalTitleMargin = documentTitle.style.marginBottom;
            const originalSectionMargin = firstSection.style.marginTop;
            
            // Aplicar valores compactos para impresi√≥n
            topHeader.style.marginBottom = '5px';
            documentTitle.style.marginBottom = '10px';
            if (firstSection) {
                firstSection.style.marginTop = '0';
            }
            
            window.print();
            
            // Restaurar valores despu√©s de imprimir
            setTimeout(() => {
                topHeader.style.marginBottom = originalTopHeaderMargin;
                documentTitle.style.marginBottom = originalTitleMargin;
                if (firstSection) {
                    firstSection.style.marginTop = originalSectionMargin;
                }
            }, 100);
        }
        
        function clearForm() {
            if (confirm('¬øEst√° seguro de que desea limpiar todos los campos?')) {
                // Limpiar TODOS los campos editables
                document.querySelectorAll('[contenteditable="true"]').forEach(field => {
                    field.textContent = '';
                });
                
                // Limpiar campos de texto en spans editables
                document.querySelectorAll('span[contenteditable="true"]').forEach(span => {
                    span.textContent = '';
                });
                
                // Desmarcar TODOS los checkboxes
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // Desmarcar TODOS los radios
                document.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });
                
                // Restaurar valores por defecto
                document.getElementById('registro-number').textContent = 'CF-001-2025';
                document.getElementById('id-muestra').textContent = '';
                
                // Regenerar c√≥digos de barras
                JsBarcode("#barcode-registro", 'CF-001-2025', {
                    format: "CODE128",
                    width: 1,
                    height: 30,
                    displayValue: false
                });
                
                JsBarcode("#barcode-muestra", '', {
                    format: "CODE128",
                    width: 1,
                    height: 50,
                    displayValue: true
                });
                
                alert('Formato limpiado completamente. Todos los campos han sido restablecidos.');
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // C√≥digo de barras para No. Registro
            const registro = document.getElementById('registro-number').textContent;
            JsBarcode("#barcode-registro", registro, {
                format: "CODE128",
                width: 1,
                height: 30,
                displayValue: false
            });
            
            // C√≥digo de barras para ID de muestra
            const muestra = document.getElementById('id-muestra').textContent;
            JsBarcode("#barcode-muestra", muestra, {
                format: "CODE128",
                width: 1,
                height: 50,
                displayValue: true
            });
            
            // Actualizar c√≥digos de barras cuando cambien los valores
            document.getElementById('registro-number').addEventListener('input', function() {
                JsBarcode("#barcode-registro", this.textContent, {
                    format: "CODE128",
                    width: 1,
                    height: 30,
                    displayValue: false
                });
            });
            
            document.getElementById('id-muestra').addEventListener('input', function() {
                JsBarcode("#barcode-muestra", this.textContent, {
                    format: "CODE128",
                    width: 1,
                    height: 50,
                    displayValue: true
                });
            });
            
            // Hacer checkboxes S√≠/No mutuamente excluyentes
            const checkboxGroups = [
                ['entrega_envase_si', 'entrega_envase_no'],
                ['lote_envase_si', 'lote_envase_no'],
                ['solucion_envase_si', 'solucion_envase_no'],
                ['temperatura_si', 'temperatura_no'],
                ['danos_no', 'danos_si']
            ];
            
            checkboxGroups.forEach(group => {
                const [siId, noId] = group;
                const siCheckbox = document.getElementById(siId);
                const noCheckbox = document.getElementById(noId);
                
                if (siCheckbox && noCheckbox) {
                    siCheckbox.addEventListener('change', function() {
                        if (this.checked) {
                            noCheckbox.checked = false;
                        }
                    });
                    
                    noCheckbox.addEventListener('change', function() {
                        if (this.checked) {
                            siCheckbox.checked = false;
                        }
                    });
                }
            });
            
            // Estilo para campos editables
            document.querySelectorAll('[contenteditable="true"]').forEach(field => {
                field.addEventListener('focus', function() {
                    this.style.backgroundColor = '#f0f8ff';
                    this.style.borderBottom = '2px solid #27ae60';
                });
                field.addEventListener('blur', function() {
                    this.style.backgroundColor = 'transparent';
                    this.style.borderBottom = '1px solid #ccc';
                });
            });
            
            // Estilo para el campo de registro
            const registroField = document.getElementById('registro-number');
            registroField.addEventListener('focus', function() {
                this.style.border = '2px solid #27ae60';
                this.style.backgroundColor = '#f0f8ff';
            });
            registroField.addEventListener('blur', function() {
                this.style.border = '1px solid #ccc';
                this.style.backgroundColor = '#f9f9f9';
            });
        });
        
        // Eventos para controlar espacios al imprimir
        window.addEventListener('beforeprint', function() {
            document.querySelector('.action-buttons').style.display = 'none';
            
            // Reducir m√°rgenes para impresi√≥n
            const topHeader = document.querySelector('.top-header');
            const documentTitle = document.querySelector('.document-title');
            const firstSection = document.querySelector('.section');
            
            if (topHeader) topHeader.style.marginBottom = '5px';
            if (documentTitle) documentTitle.style.marginBottom = '10px';
            if (firstSection) firstSection.style.marginTop = '0';
        });
        
        window.addEventListener('afterprint', function() {
            document.querySelector('.action-buttons').style.display = 'flex';
            
            // Restaurar m√°rgenes despu√©s de imprimir
            const topHeader = document.querySelector('.top-header');
            const documentTitle = document.querySelector('.document-title');
            const firstSection = document.querySelector('.section');
            
            if (topHeader) topHeader.style.marginBottom = '';
            if (documentTitle) documentTitle.style.marginBottom = '';
            if (firstSection) firstSection.style.marginTop = '';
        });
 </script>
</body>
</html>